
# 字符串类型

| 不变量类别                     | 说明                   | 是否必选 |
| ------------------------- | -------------------- | ---- |
| **类型不变量**                 | 字段类型必须为字符串（string）   | ✔ 必须 |
| **必填性（required）**         | 字段是否必须填写，由业务决定       | 可选   |
| **最大长度（maxLength）**       | 字符串允许的最大长度           | 可选   |
| **最小长度（minLength）**       | 字符串允许的最小长度           | 可选   |
| **字符集约束（allowedCharset）** | 是否允许中文、英文字母、数字、特殊符号等 | 可选   |
| **正则格式（regex）**           | 字符串格式要求，如手机号、邮箱等     | 可选   |
| **默认值（defaultValue）**     | 当用户未填写时系统自动填入的默认值    | 可选   |
| **唯一性（uniqueness）**       | 字段值是否在系统中要求唯一        | 可选   |

# 枚举类型

| 不变量类别                    | 说明              | 是否必选 |
| ------------------------ | --------------- | ---- |
| **类型不变量**                | 字段类型必须为枚举（enum） | ✔ 必须 |
| **允许值集合（allowedValues）** | 枚举的固定值范围        | ✔ 必须 |
| **必填性（required）**        | 此枚举值是否必须填写      | 可选   |
| **是否允许未知（allowUnknown）** | 是否允许为空或未知值      | 可选   |
| **默认值（defaultValue）**    | 未填写时使用的默认枚举值    | 可选   |

# 日期类型

| 不变量类别                     | 说明                   | 是否必选 |
| ------------------------- | -------------------- | ---- |
| **类型不变量**                 | 字段类型必须为日期（date）      | ✔ 必须 |
| **必填性（required）**         | 是否必须填写日期             | 可选   |
| **必须为过去日期（mustBePast）**   | 如出生日期必须早于当前时间        | 可选   |
| **必须为未来日期（mustBeFuture）** | 如预约日期必须晚于当前时间        | 可选   |
| **日期比较（compareRule）**     | 与其他字段进行比较，如开始 ≤ 结束   | 可选   |
| **默认值（defaultValue）**     | 未填写时的初始日期，如“当天”或“永久” | 可选   |

# 数值类型

| 不变量类别                     | 说明                | 是否必选 |
| ------------------------- | ----------------- | ---- |
| **类型不变量**                 | 字段类型必须为数值（number） | ✔ 必须 |
| **必填性（required）**         | 是否必须填写            | 可选   |
| **最小值（min）**              | 数值下限              | 可选   |
| **最大值（max）**              | 数值上限              | 可选   |
| **是否允许小数（allowDecimals）** | 是否可以有小数点          | 可选   |
| **默认值（defaultValue）**     | 未填写时使用的默认值        | 可选   |

# 布尔类型

| 不变量类别                 | 说明                  | 是否必选 |
| --------------------- | ------------------- | ---- |
| **类型不变量**             | 字段类型必须为布尔型（boolean） | ✔ 必须 |
| **必填性（required）**     | 是否必须填写（一般不需要）       | 可选   |
| **默认值（defaultValue）** | 未设置时默认为 true/false  | 可选   |

# 值对象类型

| 不变量类别                           | 说明                    | 是否必选           |
| ------------------------------- | --------------------- | -------------- |
| **类型不变量**                       | 字段类型为自定义值对象（VO）       | ✔ 必须           |
| **内部结构不变量（internalInvariants）** | VO 内部字段的组合规则，如开始 ≤ 结束 | ✔ 必须（业务决定规则内容） |
| **必填性（required）**               | 值对象是否必须提供             | 可选             |
| **默认值（defaultValue）**           | 默认的结构化值（如有效期默认永久）     | 可选             |

# 列表类型

| 不变量类别                         | 说明                   |
| ----------------------------- | -------------------- |
| **类型不变量**                     | 必须是某种元素类型的集合 List<T> |
| **元素类型不变量**                   | 每个元素必须满足其自身的不变量      |
| **去重不变量（uniqueItems）**        | 是否允许重复元素             |
| **最小数量（minItems）**            | 最少需要多少项              |
| **最大数量（maxItems）**            | 最多允许多少项              |
| **顺序性（ordered）**              | 列表是否有序               |
| **引用合法性（reference validity）** | 列表内每个 ID 是否指向有效实体    |
| **必填性（required）**             | 列表是否必须存在（如至少有一个分组）   |

# 标识类型

| 不变量类别                                       | 说明                                    | 是否必须            |
| ------------------------------------------- | ------------------------------------- | --------------- |
| **类型不变量（Type Invariant）**                   | ID 必须是独立的标识类型，而不是 string 或 number     | ✔ 必须            |
| **格式不变量（Format）**                           | ID 的内部格式必须符合约定（通常为 UUID、雪花算法、数据库主键格式） | 可选（取决于 ID 生成策略） |
| **非空不变量（Non-null）**                         | ID 必须存在，不允许为空（除非是未持久化状态）              | ✔ 必须            |
| **不可变性（Immutability）**                      | ID 一旦创建，不可修改                          | ✔ 必须            |
| **唯一性（Uniqueness）**                         | 聚合根或实体的 ID 必须系统全局唯一                   | ✔ 必须            |
| **合法性（Validity）**                           | 若 ID 是引用其他实体，需要保证引用目标存在               | 可选（在关系上下文中必须）   |
| **身份等价性（Equality Based on Value）**          | ID 的相等性由 ID 的值决定，而非实例                 | ✔ 必须            |
| **稳定性不变量（Consistency / Stability）**         | ID 在整个生命周期中保持不变                       | ✔ 必须            |
| **领域边界一致性（Aggregate Boundary Consistency）** | 跨聚合引用时必须使用 ID，而不能引用实体本身               | 取决于建模风格         |
| **生成规则（Generation Rule）**                   | 若 ID 由系统生成（如 UUID），则必须符合生成策略          | 可选              |

# 外部资源引用类型
| 不变量类别                              | 说明                                           | 是否必须       |
| ---------------------------------- | -------------------------------------------- | ---------- |
| **类型不变量（Type Invariant）**          | 字段必须是 ResourceReference 类型，而不是 string / url  | ✔ 必须       |
| **资源标识不变量（ResourceId）**            | 必须存在可唯一定位的资源标识，如 resourceId、fileId           | ✔ 必须       |
| **资源位置不变量（Location / URL）**        | 文件在对象存储（OSS/MinIO/S3）或 CDN 的访问路径必须合法         | ✔ 必须       |
| **非空不变量（Non-null）**                | 对于必填资源（如必须上传照片），引用不得为空                       | 可选（取决于业务）  |
| **资源类型不变量（ResourceType）**          | 资源类型必须符合约定，如 image/jpeg、image/png、video、file | 可选         |
| **文件格式不变量（Format）**                | 必须满足格式要求，如仅允许 JPG/PNG                        | 可选         |
| **大小不变量（SizeLimit）**               | 文件大小必须在限制范围内                                 | 可选         |
| **分辨率/维度不变量（Dimension）**           | 对照片类资源可要求宽高合法，如人脸照片需要最小尺寸                    | 可选         |
| **内容合法性不变量（Content Validity）**     | 如必须含有人脸特征、不能是空白图                             | 可选（如做人脸识别） |
| **引用合法性不变量（Reference Validity）**   | 引用的资源在外部存储中必须存在                              | ✔ 强烈推荐     |
| **可访问性不变量（Accessibility）**         | URL 或资源 ID 必须可被系统访问（权限、有效期）                  | 可选         |
| **不可变性（Immutability）**             | 引用一旦绑定到实体上是否允许修改                             | 业务决定       |
| **生命周期一致性（Lifecycle Consistency）** | 若人员被删除，对应资源是否需要同步删除或标记为孤儿资源                  | 可选         |
